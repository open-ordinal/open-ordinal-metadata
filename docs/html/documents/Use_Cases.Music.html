<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Music | Metadata</title><meta name="description" content="Documentation for Metadata"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script>
<style>
:root.mermaid-enabled .mermaid-block > pre {
  display: none;
}
:root:not(.mermaid-enabled) .mermaid-block > .mermaid {
  display: none !important;
}

.mermaid-block > .mermaid[data-inserted].dark {
  display: var(--mermaid-dark-display);
}
.mermaid-block > .mermaid[data-inserted].light {
  display: var(--mermaid-light-display);
}

:root {
  --mermaid-dark-display: none;
  --mermaid-light-display: block;
}
@media (prefers-color-scheme: light) {
  :root {
    --mermaid-dark-display: none;
    --mermaid-light-display: block;
  }
}
@media (prefers-color-scheme: dark) {
  :root {
    --mermaid-dark-display: block;
    --mermaid-light-display: none;
  }
}
body.light, :root[data-theme="light"] {
  --mermaid-dark-display: none;
  --mermaid-light-display: block;
}
body.dark, :root[data-theme="dark"] {
  --mermaid-dark-display: block;
  --mermaid-light-display: none;
}
</style>
</head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="/" class="title">Metadata</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">Metadata</a></li><li><a href="Use_Cases.html">Use Cases</a></li><li><a href="Use_Cases.Music.html">Music</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="md:music" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Music<a href="#md:music" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:logic-structure-parent--child" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Logic Structure (Parent / Child)<a href="#md:logic-structure-parent--child" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><div class="mermaid-block"><div class="mermaid dark">%%{init:{"theme":"dark"}}%%
graph LR
   Artist --&gt; r1[Release 1]
   Artist --&gt; r2[Release 2]
   r1 --&gt; r1t1[Track 1]
   r1t1 --&gt; t1m1[Media]
   r1 --&gt; r1t2[Track 2]
   r1t2 --&gt; t2m2[Media]
   r2 --&gt; r2t1[Track 1]
   r2t1 --&gt; t2m1[Media]</div><div class="mermaid light">%%{init:{"theme":"default"}}%%
graph LR
   Artist --&gt; r1[Release 1]
   Artist --&gt; r2[Release 2]
   r1 --&gt; r1t1[Track 1]
   r1t1 --&gt; t1m1[Media]
   r1 --&gt; r1t2[Track 2]
   r1t2 --&gt; t2m2[Media]
   r2 --&gt; r2t1[Track 1]
   r2t1 --&gt; t2m1[Media]</div><pre><code class="language-mermaid">graph LR
   Artist --&gt; r1[Release 1]
   Artist --&gt; r2[Release 2]
   r1 --&gt; r1t1[Track 1]
   r1t1 --&gt; t1m1[Media]
   r1 --&gt; r1t2[Track 2]
   r1t2 --&gt; t2m2[Media]
   r2 --&gt; r2t1[Track 1]
   r2t1 --&gt; t2m1[Media]</code></pre></div>
<a id="md:inferfaces" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Inferfaces<a href="#md:inferfaces" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>When inscribing a music there are a few relevant metadata protocols: <a href="../interfaces/OOMD.Artist.html" class="tsd-kind-interface">Artist</a>, <a href="../interfaces/OOMD.Release.html" class="tsd-kind-interface">Release</a>, <a href="../interfaces/OOMD.Track.html" class="tsd-kind-interface">Track</a> and <a href="../interfaces/OOMD.Media.html" class="tsd-kind-interface">Media</a>:</p>
<p>Protocol</p>
<pre><code class="ts"><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">Artist</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">description</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">releases</span><span class="hl-1">?: </span><span class="hl-3">Linked</span><span class="hl-1">&lt;</span><span class="hl-3">Release</span><span class="hl-1">&gt;[];</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Protocol</p>
<pre><code class="ts"><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">Release</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">artists</span><span class="hl-1">?: (</span><span class="hl-3">string</span><span class="hl-1"> | </span><span class="hl-3">Linked</span><span class="hl-1">&lt;</span><span class="hl-3">Artist</span><span class="hl-1">&gt;)[];</span><br/><span class="hl-1">    </span><span class="hl-4">cover</span><span class="hl-1">?: </span><span class="hl-3">Link</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">date</span><span class="hl-1">?: </span><span class="hl-3">Date</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">tracks</span><span class="hl-1">?: </span><span class="hl-3">Linked</span><span class="hl-1">&lt;</span><span class="hl-3">Track</span><span class="hl-1">&gt;[];</span><br/><span class="hl-1">    </span><span class="hl-4">type</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Protocol</p>
<pre><code class="ts"><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">Track</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">artists</span><span class="hl-1">?: (</span><span class="hl-3">string</span><span class="hl-1"> | </span><span class="hl-3">Linked</span><span class="hl-1">&lt;</span><span class="hl-3">Artist</span><span class="hl-1">&gt;)[];</span><br/><span class="hl-1">    </span><span class="hl-4">releases</span><span class="hl-1">?: (</span><span class="hl-3">string</span><span class="hl-1"> | </span><span class="hl-3">Linked</span><span class="hl-1">&lt;</span><span class="hl-3">Release</span><span class="hl-1">&gt;)[];</span><br/><span class="hl-1">    </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Protocol</p>
<pre><code class="ts"><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">Media</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">decoder</span><span class="hl-1">?: </span><span class="hl-3">Link</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">duration</span><span class="hl-1">?: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Here is an example of what the metadata for a single track can look like:</p>
<p>Metadata</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-7">&quot;track&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;title&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;Dream&quot;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-7">&quot;media&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;duration&quot;</span><span class="hl-1">: </span><span class="hl-8">69.68299999999999</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;decoder&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">            </span><span class="hl-7">&quot;@id&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;6a96a763093b30319ab9f38e5043405c4853e72c86eb1107dbf92f68e64d7cb5i0&quot;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>One could of course inscribe a single track on its own like this, with its metadata containing the information about the artist and release in addition to metadata about the inscribed track itself. However, to allow a music player to navigate to a track's artists' other releases we need a way of uniquely identifying artists and releases. This is solved by making each artist (and each artist's releases) inscriptions on their own, and linking them using inscription ids, sat numbers, or parent/child relationships. This way we also avoid duplicating metadata on chain when inscribing more than a single track.</p>
<p>Using the parent/child relationship is preferrable to linking with ids or sats, since the latter are inherently one-way but we want two-way linking for the data to be fully navigatable. E.g. when linking artists/releases/tracks using ids or sats we are forced to <a href="#md:versioning">reinscribe</a> the release inscription when a track is added, and reinscribe the artist inscription when adding a new release.</p>
<ul>
<li>The Artist protocol defines that by default the child inscriptions are assumed to be that artist's releases</li>
<li>The Release protocol defines that by default the child inscriptions are assumed to be the track(s) of that release, and also that by default the parent inscriptions are assumed to be the artists behind that release</li>
<li>The Track protocol defines that by default the parent inscriptions are the release(s) that track appears on, and also that unless otherwise specified the artists behind the track are the artist(s) of its first release</li>
</ul>
<p>Knowing this, we can split our combined artist/release/track inscription for earlier into three separate inscriptions and use the parent/child relationship to avoid reinscriptions and future data duplication. First, inscribe the artist, follwing the <a href="../interfaces/OOMD.Artist.html" class="tsd-kind-interface">Artist</a> metadata protocol:</p>
<p>Metadata</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-7">&quot;artist&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;name&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;DJ Tiny&quot;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Then, inscribe the album as a child of the artist, following the <a href="">Release</a> protocol:</p>
<p>Metadata</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-7">&quot;release&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;title&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;Tiny Vikings OST&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;type&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;album&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;cover&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">            </span><span class="hl-7">&quot;@id&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;3a504956f370c0362e48f7a1daf53d51c250c3c0d2054eb0b018d60caad0be77i0&quot;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Finally, inscribe the track as a child of the album, following the <a href="">Track</a> protocol:</p>
<p>Metadata</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-7">&quot;track&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;title&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;Dream&quot;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-7">&quot;media&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;duration&quot;</span><span class="hl-1">: </span><span class="hl-8">69.68299999999999</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">&quot;decoder&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">            </span><span class="hl-7">&quot;@id&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;6a96a763093b30319ab9f38e5043405c4853e72c86eb1107dbf92f68e64d7cb5i0&quot;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:advanced-specifying-a-custom-decoder" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Advanced: Specifying a custom decoder<a href="#md:advanced-specifying-a-custom-decoder" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>So far we have not seen the briefly mentioned <a href="../interfaces/OOMD.Media.html" class="tsd-kind-interface">Media</a> protocol, because the content of the inscribed track is assumed to be browser playable audio (mp3, wav etc). However, the size limitations and cost of inscriptions on the Bitcoin blockchain makes such pre-rendered formats not ideal for longer pieces due to the increasing file size.</p>
<p>By inscribing a software synthesizer along with the instructions for it we can have the browser render the music on the device when played, saving the cost of inscribing the rendered music. This has been done by multiple html-based audio-visual inscriptions already. The <a href="../interfaces/OOMD.Media.html" class="tsd-kind-interface">Media</a> protocol provides a standardized way of specifying a javascript decoder module that can be used by a music player/ordinal browser to play audio inscribed in a non-standard format.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:music"><span>Music</span></a><ul><li><a href="#md:logic-structure-parent--child"><span>Logic <wbr/>Structure (<wbr/>Parent / <wbr/>Child)</span></a></li><li><a href="#md:inferfaces"><span>Inferfaces</span></a></li><li><a href="#md:advanced-specifying-a-custom-decoder"><span>Advanced: <wbr/>Specifying a custom decoder</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Metadata</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p>Made by Open Ordinal for the Ordinal community</p></footer><div class="overlay"></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-XHBQC2GFXJ"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XHBQC2GFXJ');</script>
<script type="module">
import mermaid from "https://unpkg.com/mermaid@11.3.0/dist/mermaid.esm.min.mjs";

document.documentElement.classList.add("mermaid-enabled");

mermaid.initialize({startOnLoad:true});

requestAnimationFrame(function check() {
  let some = false;
  document.querySelectorAll("div.mermaid:not([data-inserted])").forEach(div => {
    some = true;
    if (div.querySelector("svg")) {
      div.dataset.inserted = true;
    }
  });

  if (some) {
    requestAnimationFrame(check);
  }
});
</script>
</body></html>
